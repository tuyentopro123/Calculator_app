{"version":3,"sources":["components/calculator/btnConfig.js","components/calculator/Calculator.jsx","App.js","index.js"],"names":["BTN_ACTIONS","ADD","THEME","CALC","DELETE","DELETEONE","btns","display","action","class","y","Calculator","btnsRef","useRef","expRef","useState","expression","setExpression","useEffect","Array","from","current","querySelectorAll","forEach","e","style","height","offsetWidth","mouseClick","item","i","length","textContent","boxShadow","console","log","mouseUpClick","btnClick","expDiv","document","body","classList","toggle","addAnimSpan","parentNode","transform","oper","removeAnimSpan","slice","querySelector","innerHTML","trim","remove","cloneNode","appendChild","x","res","eval","toString","setTimeout","Math","floor","content","span","createElement","opacity","width","addSquareRoot","childNodes","removeChild","className","ref","map","index","onClick","onMouseDown","onMouseUp","App","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.909ef9e4.chunk.js","sourcesContent":["export const BTN_ACTIONS = {\r\n    ADD: 'ADD',\r\n    THEME: 'THEME',\r\n    CALC: 'CALC',\r\n    DELETE: 'DELETE',\r\n    DELETEONE: 'DELETEONE',\r\n}\r\n\r\nexport const btns = [\r\n    {\r\n        display: 'C',\r\n        action: BTN_ACTIONS.DELETE,\r\n        class: 'btn__op btn__c btn__cd'\r\n    },\r\n    {\r\n        display: 'D',\r\n        action: BTN_ACTIONS.DELETEONE,\r\n        class: 'btn__op btn__cd'\r\n    },\r\n    {\r\n        display: '(',\r\n        action: BTN_ACTIONS.ADD,\r\n        class: 'btn__op'\r\n    },\r\n    {\r\n        display: ')',\r\n        action: BTN_ACTIONS.ADD,\r\n        class: 'btn__op'\r\n    },\r\n    {\r\n        display: '.',\r\n        action: BTN_ACTIONS.ADD,\r\n        class: 'number'\r\n    },\r\n    {\r\n        display: '/',\r\n        action: BTN_ACTIONS.ADD,\r\n        class: 'btn__op'\r\n    },\r\n    {\r\n        display: '7',\r\n        action: BTN_ACTIONS.ADD,\r\n        class: 'number'\r\n    },\r\n    {\r\n        display: '8',\r\n        action: BTN_ACTIONS.ADD,\r\n        class: 'number'\r\n    },\r\n    {\r\n        display: '9',\r\n        action: BTN_ACTIONS.ADD,\r\n        class: 'number'\r\n    },\r\n    {\r\n        display: 'x',\r\n        action: BTN_ACTIONS.ADD,\r\n        class: 'btn__op'\r\n    },\r\n    {\r\n        display: '4',\r\n        action: BTN_ACTIONS.ADD,\r\n        class: 'number'\r\n    },\r\n    {\r\n        display: '5',\r\n        action: BTN_ACTIONS.ADD,\r\n        class: 'number'\r\n    },\r\n    {\r\n        display: '6',\r\n        action: BTN_ACTIONS.ADD,\r\n        class: 'number'\r\n    },\r\n    {\r\n        display: '-',\r\n        action: BTN_ACTIONS.ADD,\r\n        class: 'btn__op'\r\n    },\r\n    {\r\n        display: '1',\r\n        action: BTN_ACTIONS.ADD,\r\n        class: 'number'\r\n    },\r\n    {\r\n        display: '2',\r\n        action: BTN_ACTIONS.ADD,\r\n        class: 'number'\r\n    },\r\n    {\r\n        display: '3',\r\n        action: BTN_ACTIONS.ADD,\r\n        class: 'number'\r\n    },\r\n    {\r\n        display: '+',\r\n        action: BTN_ACTIONS.ADD,\r\n        class: 'btn__op'\r\n    },\r\n    {\r\n        display: '☀️',\r\n        action: BTN_ACTIONS.THEME,\r\n        class: 'number'\r\n    },\r\n    {\r\n        display: '0',\r\n        action: BTN_ACTIONS.ADD,\r\n        class: 'number'\r\n    },\r\n    {\r\n        display: '=',\r\n        action: BTN_ACTIONS.CALC,\r\n        class: 'btn__op'\r\n    },\r\n   \r\n]","import React, { useRef, useEffect, useState } from 'react';\r\n\r\nimport './Calculator.css';\r\n\r\nimport { btns, BTN_ACTIONS } from \"./btnConfig\"\r\n    let y=1;\r\nconst Calculator = () => {\r\n    const btnsRef = useRef(null);\r\n    const expRef = useRef(null);\r\n\r\n    const [expression, setExpression] = useState('');\r\n\r\n    useEffect(() => {\r\n        const btns = Array.from(btnsRef.current.querySelectorAll('button'));\r\n        btns.forEach(e => e.style.height = e.offsetWidth + 'px');\r\n    }, []);\r\n\r\n    const mouseClick = (item) => {\r\n        const btnRef = btnsRef.current\r\n        const btns = Array.from(btnsRef.current.querySelectorAll('button'));\r\n        // btns.forEach(e => e.target.style.boxShadow = `1px 1px 2px rgba(0,0,0,0.4) inset` );\r\n        for(var i=0; i<btns.length; i++) {\r\n            if(btns[i].textContent === item.display) {\r\n                    btns[i].style.boxShadow = `1px 1px 2px rgba(0,0,0,0.4) inset`\r\n                    console.log('1')\r\n            \r\n            }\r\n        }\r\n    }\r\n    const mouseUpClick = (item) => {\r\n        const btnRef = btnsRef.current\r\n        const btns = Array.from(btnsRef.current.querySelectorAll('button'));\r\n        // btns.forEach(e => e.target.style.boxShadow = `1px 1px 2px rgba(0,0,0,0.4) inset` );\r\n        for(var i=0; i<btns.length; i++) {\r\n            if(btns[i].textContent === item.display) {\r\n                btns[i].style.boxShadow = `0px 1px 1px rgb(255 255 255 / 80%) inset, 1px 1px 3px rgb(0 0 0 / 20%)`\r\n                console.log('2')\r\n            }\r\n                }\r\n            }\r\n    const btnClick = (item) => {\r\n        const expDiv = expRef.current;\r\n\r\n        if (item.action === BTN_ACTIONS.THEME) document.body.classList.toggle('dark');\r\n\r\n        if (item.action === BTN_ACTIONS.ADD) {\r\n            addAnimSpan(item.display);\r\n            if(expDiv.offsetWidth*y > expDiv.parentNode.offsetWidth - 30 ) {\r\n                expDiv.style.transform = `scale(${y-0.2})`\r\n                y-= 0.2;\r\n            }\r\n            const oper = item.display !== 'x' ? item.display : '*';\r\n            setExpression(expression + oper);\r\n        }\r\n\r\n        if (item.action === BTN_ACTIONS.DELETEONE) {\r\n            removeAnimSpan(item.display)\r\n            setExpression(expression.slice(0,-1));\r\n        }\r\n\r\n        // if (item.action === BTN_ACTIONS.SQUAREROOT) {\r\n        //     addSquareRoot(item.display)\r\n        //     const rel = (Math.floor(Math.sqrt(eval(expression))*100000000)/100000000).toString();\r\n        //     setExpression(expression + rel)\r\n\r\n        // }\r\n\r\n        if (item.action === BTN_ACTIONS.DELETE) {\r\n            expDiv.parentNode.querySelector('div:last-child').innerHTML = '';\r\n            expDiv.style.transform = `scale(${1})`\r\n            y=1;\r\n            expDiv.innerHTML = '';\r\n            setExpression('');\r\n        }\r\n\r\n        if (item.action === BTN_ACTIONS.CALC) {\r\n            if (expression.trim().length <= 0) return;\r\n\r\n\r\n            expDiv.parentNode.querySelector('div:last-child').remove();\r\n\r\n            const cloneNode = expDiv.cloneNode(true);\r\n            expDiv.parentNode.appendChild(cloneNode);\r\n            const x = expDiv.parentNode.querySelector('div:last-child')\r\n            const transform = `translate(${-(360-(x.offsetWidth*0.4)) + 'px'},${-60 +'px'}) scale(0.4)`;\r\n\r\n            try {\r\n                let res = eval(expression);\r\n                \r\n                setExpression(res.toString());\r\n                \r\n                setTimeout(() => {\r\n                    cloneNode.style.transform = transform;\r\n                    expDiv.innerHTML = '';\r\n                    addAnimSpan(Math.floor(res * 100000000) / 100000000);\r\n                }, 200);\r\n            } catch {\r\n                setTimeout(() => {\r\n                    cloneNode.style.transform =  `translate(${-140 + 'px'},${-50 +'px'}) scale(0.6)`;\r\n                    cloneNode.innerHTML = 'system error';\r\n                }, 200);\r\n            } finally {\r\n                console.log('calc complete');\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n    const addAnimSpan = (content) => {\r\n        const expDiv = expRef.current;\r\n        const span = document.createElement('span');\r\n        span.innerHTML = content;\r\n        span.style.opacity = '0';\r\n        expDiv.appendChild(span);\r\n\r\n        const width = span.offsetWidth + 'px';\r\n        span.style.width = '0';\r\n\r\n        setTimeout(() => {\r\n            span.style.opacity = '1';\r\n            span.style.width = width;\r\n        }, 100);\r\n    }\r\n\r\n    const addSquareRoot = (content) => {\r\n        const expDiv = expRef.current;\r\n        const span = document.createElement('span');\r\n        \r\n        span.innerHTML = content + '(';\r\n        span.style.opacity = '0';\r\n        expDiv.appendChild(span);\r\n\r\n        const width = span.offsetWidth + 'px';\r\n        span.style.width = '0';\r\n\r\n        setTimeout(() => {\r\n            span.style.opacity = '1';\r\n            span.style.width = width;\r\n        }, 100);\r\n    }\r\n\r\n    const removeAnimSpan = (content) => {\r\n        const expDiv = expRef.current;\r\n        if(expDiv.childNodes.length > 0) {\r\n            expDiv.removeChild(expDiv.childNodes[expDiv.childNodes.length-1]);\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"calculator\">\r\n            <div className=\"calculator__result\">\r\n                <div ref={expRef} className=\"calculator__result__exp\"></div>\r\n                <div className=\"calculator__result__exp\"></div>\r\n            </div>\r\n            <div ref={btnsRef} className=\"calculator__btns\">\r\n                {\r\n                    btns.map((item,index) =>(\r\n                        <button key={index} className={item.class} onClick={() => btnClick(item)} onMouseDown={() => mouseClick(item)} onMouseUp={() => mouseUpClick(item)}>\r\n                            {item.display}\r\n                        </button>\r\n                    ))\r\n                }\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Calculator","import './App.css';\n\nimport Calculator from './components/calculator/Calculator'\nfunction App() {\n  return (\n    <div>\n      <Calculator/>\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}